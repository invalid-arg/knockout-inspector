ko.bindingHandlers.jsonViewer={jsonViewer:{},init:function(a,b,c){this.jsonViewer=new JsonViewer(a,b,c)},update:function(b,c,d){this.jsonViewer.compare(c);var a=viewModelFormatter(this.jsonViewer.value,jsonViewer.getRootName());b.innerHTML=a}};var JsonViewer=function(b,e,h){var g={},c=function(){var i=h()._ko_property_writers.jsonViewer.toString();i=i.substring(24).replace(" = __ko_value; }","");return i},f=function(i){a(ko.utils.unwrapObservable(i()),g)},a=function(m,i){for(var l in m){var k=ko.isObservable(m[l]);var j=ko.utils.unwrapObservable(m[l]);if(i[l]){if(i[l].value&&(i[l].value!=j)){i[l].changeCount++;i[l].value=j}else{a(j,i[l])}}else{if(typeof j!=="object"||(j&&j.getMonth)){i[l]={value:j,changeCount:0,isObservable:k}}else{i[l]={};a(j,i[l])}}}},d=function(i){var k,j=i.target;if(i.target.className=="collapser"){k=j.parentNode.getElementsByClassName("collapsible")[0];if(k.parentNode.classList.contains("collapsed")){k.parentNode.classList.remove("collapsed")}else{k.parentNode.classList.add("collapsed")}}};document.body.addEventListener("click",d,false);return{getRootName:c,compare:f,value:g}};var viewModelFormatter=function(){var h=function(i){return i!=null?i.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},c=function(j,i){return'<span class="'+i+'">'+h(j)+"</span>"},b=function(i){if(i&&i.value){return i}else{return{value:i,changeCount:0}}},d=function(j){j=b(j);var k=typeof j.value,i="";if(j.value==null){i+=c("null","type-null")}else{if(j.value&&j.value.constructor==Array){i+=g(j.value)}else{if(k=="object"&&j.value.getMonth){i+=a(j.value.toString())}else{if(k=="object"){i+=f(j.value)}else{if(k=="number"){i+=c(j.value,"type-number")}else{if(k=="string"){i+=a(j.value)}else{if(k=="boolean"){i+=c(j.value,"type-boolean")}else{if(k=="function"){i+=c("function() {  }","type-callback-function")}}}}}}}}return i},a=function(j){var i="";if(/^(http|https):\/\/[^\s]+$/.test(j)){i+=c('"',"type-string")+'<a href="'+j+'">'+h(j)+"</a>"+c('"',"type-string")}else{i+=c('"'+j+'"',"type-string")}return i},g=function(m){var l,n,j='<div class="collapser "></div>[<span class="ellipsis"></span><ul class="array collapsible">',k=false;for(l=0,n=m.length;l<n;l++){k=true;j+='<li><div class="hoverable collapsed">';j+=d(m[l]);if(l<n-1){j+=","}j+="</div></li>"}j+="</ul>]";if(!k){j="[ ]"}return j},f=function(n){var m,l,p,o=Object.keys(n),j='<div class="collapser"></div>{<span class="ellipsis"></span><ul class="obj collapsible">',k=false;for(m=0,p=o.length;m<p;m++){l=o[m];k=true;if(n[l]&&n[l].hasOwnProperty("isObservable")&&n[l].isObservable){j+='<li><div class="hoverable collapsed">'}else{j+='<li><div class="hoverable collapsed nonObservable">'}if(n[l]&&n[l].hasOwnProperty("changeCount")&&n[l].changeCount>0){j+='<span class="change-counter">'+n[l].changeCount+"</span>"}j+='<span class="property">'+h(l)+"</span>: ";j+=d(n[l]);if(m<p-1){j+=","}j+="</div></li>"}j+="</ul>}";if(!k){j="{ }"}return j},e=function(k,i){var j="";j+='<div class="jsonViewer">';j+='<ul class="obj collapsible"><li><div class="hoverable"><span class="property">'+i+"</span>: ";j+=d(k);j+="</div></li></ul>";j+="</div>";return j};return e}();