ko.bindingHandlers.inspect={init:function(element,valueAccessor,allBindingsAccessor){var bindingHandler=new koInspector.BindingHandler(element,allBindingsAccessor);var guid=koInspector.guid.create();element.setAttribute("data-koInspector",guid);koInspector.global.inspectors[guid]=bindingHandler},update:function(element,valueAccessor,allBindingsAccessor){var bindingHandler=koInspector.global.inspectors[element.getAttribute("data-koInspector")];bindingHandler.comparer.compare(valueAccessor());bindingHandler.renderer.draw(bindingHandler.comparer.storedObject)}};if(typeof koInspector=="undefined"){koInspector={}}koInspector.BindingHandler=function(container,allBindingsAccessor){this.addStyle();this.comparer=new koInspector.Comparer;this.rootName=this.getRootName(allBindingsAccessor);this.renderer=new koInspector.Renderer(this.rootName,container);return this};koInspector.BindingHandler.prototype.addStyle=function(){if(document.getElementById("ko-inspector-css")===null){var style=document.createElement("style");style.type="text/css";style.rel="stylesheet";style.innerHTML=koInspector.css;style.id="ko-inspector-css";document.getElementsByTagName("head")[0].appendChild(style)}};koInspector.BindingHandler.prototype.getRootName=function(allBindingsAccessor){var propertyString=allBindingsAccessor()._ko_property_writers.inspect.toString();propertyString=propertyString.substring(24).replace(" = __ko_value; }","");return propertyString};if(typeof koInspector=="undefined"){koInspector={}}koInspector.global={inspectors:{}};if(typeof koInspector=="undefined"){koInspector={}}koInspector.Comparer=function(){this.storedObject={};this.cache=[];this.dirtyFlagCache=[];return this};koInspector.Comparer.prototype.addDirtyFlags=function(newObject){for(p in newObject){if(ko.isObservable(newObject[p])){if(typeof newObject[p].isDirty==="undefined"){newObject[p].isDirty=new koInspector.DirtyFlag(newObject[p])}}var unwrapped=ko.utils.unwrapObservable(newObject[p]);if(this.isObject(unwrapped)){if(this.cycleReplacer(unwrapped,this.dirtyFlagCache)){break}this.addDirtyFlags(unwrapped)}}};koInspector.Comparer.prototype.isObject=function(object){return object&&typeof object==="object"&&typeof object.getMonth==="undefined"};koInspector.Comparer.prototype.resetDirtyFlag=function(object){object.isDirty(false)};koInspector.Comparer.prototype.compare=function(newObject){this.addDirtyFlags(ko.utils.unwrapObservable(newObject));this.recurse(ko.utils.unwrapObservable(newObject),this.storedObject)};koInspector.Comparer.prototype.recurse=function(newObject,object){for(p in newObject){if(ko.isObservable(newObject[p])){var unwrapped=ko.utils.unwrapObservable(newObject[p]);if(object[p]){this.updateObservable(unwrapped,newObject,object,p)}else{this.parseObject(unwrapped,newObject,object,p)}}else{if(object[p]){this.updateObject(newObject[p],newObject,object,p)}else{this.parseObject(newObject[p],newObject,object,p)}}}};koInspector.Comparer.prototype.updateObservable=function(unwrapped,newObject,object,p){if(this.isObject(object[p].value)){if(newObject[p].isDirty()){this.resetDirtyFlag(newObject[p]);object[p].count++;object[p].value={}}this.recurse(unwrapped,object[p].value)}else{if(newObject[p].isDirty()){this.resetDirtyFlag(newObject[p]);object[p].count++;object[p].value=unwrapped;object[p].isObservable=true}}if(object[p]){object[p].subscribers=ko.isObservable(newObject[p])?newObject[p].getSubscriptionsCount():0}};koInspector.Comparer.prototype.updateObject=function(unwrapped,newObject,object,p){if(this.isObject(object[p].value)){this.recurse(newObject[p],object[p].value)}else{if(object[p].value!==newObject[p]){object[p].count++;object[p].value=newObject[p];object[p].isObservable=false}}};koInspector.Comparer.prototype.parseObject=function(unwrapped,newObject,object,p){if(this.isObject(unwrapped)){if(this.cycleReplacer(unwrapped,this.cache)){return}object[p]={value:{},count:0,isObservable:ko.isObservable(newObject[p]),subscribers:ko.isObservable(newObject[p])?newObject[p].getSubscriptionsCount():0,guid:koInspector.guid.create()};this.recurse(unwrapped,object[p].value)}else{object[p]={value:unwrapped,count:0,isObservable:ko.isObservable(newObject[p]),subscribers:ko.isObservable(newObject[p])?newObject[p].getSubscriptionsCount():0}}};koInspector.Comparer.prototype.cycleReplacer=function(object,cache){if(typeof object==="object"&&object!==null){if(cache.indexOf(object)!==-1){return true}cache.push(object);return false}};if(typeof koInspector=="undefined"){koInspector={}}koInspector.css='.ko-inspector {    white-space: normal !important;    font-family: Monaco, Menlo, Consolas, "Courier New", monospace;    display: inline-block;    padding: 9.5px;    font-size: 13px;    background-color: #f5f5f5;    border: 1px solid #ccc;    border: 1px solid rgba(0, 0, 0, 0.15);    -webkit-border-radius: 4px;    -moz-border-radius: 4px;    border-radius: 4px;    color: #333;    line-height: 18px;}    .ko-inspector ul {        list-style-type: none;        padding: 0;        margin: 0 0 0 26px;    }    .ko-inspector li {        position: relative;    }    .ko-inspector .hoverable {        transition: background-color .2s ease-out 0;        -webkit-transition: background-color .2s ease-out 0;        display: inline-block;    }    .ko-inspector .hovered {        transition-delay: .2s;        -webkit-transition-delay: .2s;    }    .ko-inspector .selected {        outline-style: solid;        outline-width: 1px;        outline-style: dotted;    }    .ko-inspector .collapsed > .collapsible {        display: none;    }    .ko-inspector .ellipsis {        display: none;    }    .ko-inspector .collapsed > .ellipsis {        display: inherit;    }    .ko-inspector .collapser {        position: absolute;        top: 1px;        left: -1.5em;        cursor: default;        user-select: none;        -webkit-user-select: none;    }    .ko-inspector .property {        font-weight: bold;    }        .ko-inspector .property.nonObservable {            color: #808080;            font-weight: normal;        }    .ko-inspector .type-null {        color: gray;    }    .ko-inspector .type-boolean {        color: firebrick;    }    .ko-inspector .type-number {        color: blue;    }    .ko-inspector .type-string {        color: green;    }    .ko-inspector .callback-function {        color: gray;    }    .ko-inspector .collapser:after {        content: "-";    }    .ko-inspector .collapsed > .collapser:after {        content: "+";    }    .ko-inspector .ellipsis:after {        content: " â€¦ ";    }    .ko-inspector .collapsible {        margin-left: 1.4em;    }    .ko-inspector .hoverable {        padding-top: 1px;        padding-bottom: 1px;        padding-left: 2px;        padding-right: 2px;        border-radius: 2px;    }    .ko-inspector .hovered {        background-color: #ebeef9;    }    .ko-inspector .collapser {        padding-right: 6px;        padding-left: 6px;        cursor: pointer;    }    .ko-inspector .change-counter {        background-color: #04C;        background-image: linear-gradient(#08C, #04C);        color: #FFF;        padding: 0 2px;        margin-right: 2px;    }    .ko-inspector .subscriber-counter {        background-color: #51A351;        background-image: linear-gradient(#62C462, #51A351);        color: #FFF;        padding: 0 2px;        margin-right: 2px;    }';if(typeof koInspector=="undefined"){koInspector={}}koInspector.DirtyFlag=function(root){var _isDirty=false;var isDirty=function(value){if(value!==undefined){_isDirty=value}return _isDirty};root.subscribe(function(){if(!isDirty()){isDirty(true)}});return isDirty};if(typeof koInspector=="undefined"){koInspector={}}koInspector.Renderer=function(objectName,container){this.objectName=objectName;this.container=this.prepareContainer(container);this.treeObject;this.cache=[];return this};koInspector.Renderer.prototype.prepareObject=function(object){this.treeObject={};var clone=JSON.parse(JSON.stringify(object));recurseObject("root",this.treeObject,clone);return this.treeObject;function recurseObject(name,returnObject,object){returnObject[name]=object;for(var property in returnObject[name]){if(object.hasOwnProperty(property)){if(Object.prototype.toString.call(object[property].value)==="[object Array]"){recurseObject(object[property].guid,returnObject,object[property].value);returnObject[name][property].value="[[array]]"}else if(object[property].value&&typeof object[property].value==="object"&&object[property].value.getMonth===undefined){recurseObject(object[property].guid,returnObject,object[property].value);returnObject[name][property].value="[[object]]"}}}return returnObject}};koInspector.Renderer.prototype.prepareContainer=function(container){var id="ko-inspector-"+koInspector.guid.create(),div=this.create("div","ko-inspector");div.id=id;container.appendChild(div);return div};koInspector.Renderer.prototype.draw=function(object){this.prepareObject(object);this.container.innerHTML="";var self=this;var root=self.treeObject.root;var ul=self.create("ul","collapsible");var li=self.create("li");var div=self.create("div","hoverable collapsed");var span=self.create("span","property");var collapser=self.create("div","collapser");var ellipsis=self.create("span","ellipsis");var childUl=self.create("ul","collapsible");span.innerText=self.objectName;collapser.onclick=function(){self.collapserClick.call(self,root,div,childUl,"root")};div.appendChild(span);div.appendChild(document.createTextNode(": "));div.appendChild(collapser);div.appendChild(document.createTextNode("{"));div.appendChild(ellipsis);div.appendChild(childUl);div.appendChild(document.createTextNode("}"));li.appendChild(div);ul.appendChild(li);self.container.appendChild(ul);if(self.cache.indexOf("root")>-1){self.showChildren(root,childUl);div.className="hoverable"}};koInspector.Renderer.prototype.showChildren=function(root,childUl){var self=this;if(childUl.innerHTML===""){var keys=Object.keys(root);for(var i=0;i<keys.length;i++){var key=keys[i],isLast=i===length-1;childUl.appendChild(self.drawValue(key,root[key],isLast))}}};koInspector.Renderer.prototype.collapserClick=function(root,div,childUl,guid){var self=this;if(self.hasClass(div,"collapsed")){self.showChildren.call(self,root,childUl);div.className="hoverable";self.cache.push(guid)}else{div.className="hoverable collapsed";self.cache.splice(self.cache.indexOf(guid),1)}};koInspector.Renderer.prototype.drawObject=function(div,value){var self=this;var root=self.treeObject[value.guid];var collapser=self.create("div","collapser");var ellipsis=self.create("span","ellipsis");var childUl=self.create("ul","collapsible");collapser.onclick=function(){self.collapserClick.call(self,root,div,childUl,value.guid)};div.appendChild(collapser);div.appendChild(document.createTextNode(value.value==="[[object]]"?"{":"["));div.appendChild(ellipsis);div.appendChild(childUl);div.appendChild(document.createTextNode(value.value==="[[object]]"?"}":"]"));div.className="hoverable collapsed";if(self.cache.indexOf(value.guid)>-1){self.showChildren(root,childUl);div.className="hoverable"}return div};koInspector.Renderer.prototype.drawValue=function(property,value,isLast){var self=this;var valueType=typeof value.value;var li=self.create("li"),div=self.create("div","hoverable"),span=self.create("span","property"),valueElement;if(!value.isObservable){span.className+=" nonObservable"}if(value.count&&value.count>0){var countSpan=self.create("span","change-counter");countSpan.innerText=value.count;div.appendChild(countSpan)}if(value.subscribers&&value.subscribers>0){var subscriberSpan=self.create("span","subscriber-counter");subscriberSpan.innerText=value.subscribers;div.appendChild(subscriberSpan)}span.innerText=property;div.appendChild(span);div.appendChild(document.createTextNode(": "));if(value.value==null)this.drawSpan(div,"null","type-null");else if(valueType=="object"&&value.value.getMonth)this.drawString(div,value.value.toString());else if(value.value=="[[object]]"||value.value=="[[array]]")this.drawObject(div,value);else if(valueType=="number")this.drawSpan(div,value.value,"type-number");else if(valueType=="string")this.drawString(div,value.value);else if(valueType=="boolean")this.drawSpan(div,value.value,"type-boolean");else if(valueType=="function")this.drawSpan(div,"function() {â€¦}","type-callback-function");if(!isLast){div.appendChild(document.createTextNode(","))}li.appendChild(div);return li};koInspector.Renderer.prototype.drawSpan=function(div,value,className){var span=this.create("span",className);span.innerText=value;div.appendChild(span)};koInspector.Renderer.prototype.drawString=function(div,value){return this.drawSpan(div,'"'+value+'"',"type-string")};koInspector.Renderer.prototype.create=function(name,elementClass){var element=document.createElement(name);if(elementClass){element.className=elementClass}return element};koInspector.Renderer.prototype.hasClass=function(element,cls){return(" "+element.className+" ").indexOf(" "+cls+" ")>-1};if(typeof koInspector=="undefined"){koInspector={}}koInspector.guid={s4:function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)},create:function(){return koInspector.guid.s4()+koInspector.guid.s4()+"-"+koInspector.guid.s4()+"-"+koInspector.guid.s4()+"-"+koInspector.guid.s4()+"-"+koInspector.guid.s4()+koInspector.guid.s4()+koInspector.guid.s4()}};